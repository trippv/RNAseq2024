<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.53">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Importar y exportar datos – RNAseq2024</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./2_unix.html" rel="next">
<link href="./1_Rproyectos.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
<link rel="stylesheet" href="style.css">
</head>

<body class="nav-sidebar docked nav-fixed slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./img/logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">RNAseq2024</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Inicio</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./apoyo.html"> 
<span class="menu-text">Recursos de apoyo</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-lecciones" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Lecciones</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-lecciones">    
        <li>
    <a class="dropdown-item" href="./1_Rbasico.html">
 <span class="dropdown-text">R y Rstudio: Comandos Basicos</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./1_Rproyectos.html">
 <span class="dropdown-text">Proyectos de Rstudio</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./1_Rimportar.html">
 <span class="dropdown-text">Importar y exportar datos</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./2_unix.html">
 <span class="dropdown-text">Introduccion Bash</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./1_Rimportar.html">Importar y exportar datos</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1_Rbasico.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R y Rstudio: Comandos Basicos</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1_Rproyectos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Proyectos de Rstudio</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1_Rimportar.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Importar y exportar datos</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2_unix.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduccion Bash</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="99">
    <h2 id="toc-title">Contenido</h2>
   
  <ul>
  <li><a href="#importar-archivos-de-texto" id="toc-importar-archivos-de-texto" class="nav-link active" data-scroll-target="#importar-archivos-de-texto">Importar archivos de texto</a></li>
  <li><a href="#funciones-base-para-importar-archivos" id="toc-funciones-base-para-importar-archivos" class="nav-link" data-scroll-target="#funciones-base-para-importar-archivos">Funciones base para importar archivos</a>
  <ul class="collapse">
  <li><a href="#importar-usando-ventanas" id="toc-importar-usando-ventanas" class="nav-link" data-scroll-target="#importar-usando-ventanas">Importar usando ventanas</a></li>
  <li><a href="#importar-desde-la-línea-de-comando" id="toc-importar-desde-la-línea-de-comando" class="nav-link" data-scroll-target="#importar-desde-la-línea-de-comando">Importar desde la línea de comando</a></li>
  <li><a href="#importar-archivos-desde-un-url" id="toc-importar-archivos-desde-un-url" class="nav-link" data-scroll-target="#importar-archivos-desde-un-url">Importar archivos desde un URL</a></li>
  </ul></li>
  <li><a href="#exploración-de-datos" id="toc-exploración-de-datos" class="nav-link" data-scroll-target="#exploración-de-datos">Exploración de datos</a></li>
  <li><a href="#generar-un-subconjunto-de-datos" id="toc-generar-un-subconjunto-de-datos" class="nav-link" data-scroll-target="#generar-un-subconjunto-de-datos">Generar un subconjunto de datos</a>
  <ul class="collapse">
  <li><a href="#subconjunto-con-indices" id="toc-subconjunto-con-indices" class="nav-link" data-scroll-target="#subconjunto-con-indices">Subconjunto con indices</a></li>
  <li><a href="#operadores-y" id="toc-operadores-y" class="nav-link" data-scroll-target="#operadores-y">Operadores <code>&amp;</code> y <code>|</code></a></li>
  <li><a href="#subconjunto-usando-la-función-subset" id="toc-subconjunto-usando-la-función-subset" class="nav-link" data-scroll-target="#subconjunto-usando-la-función-subset">Subconjunto usando la función <code>subset()</code></a></li>
  </ul></li>
  <li><a href="#exportar-tablas" id="toc-exportar-tablas" class="nav-link" data-scroll-target="#exportar-tablas">Exportar tablas</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Importar y exportar datos</h1>
</div>



<div class="quarto-title-meta column-body">

    
  
    
  </div>
  


</header>


<section id="importar-archivos-de-texto" class="level2">
<h2 class="anchored" data-anchor-id="importar-archivos-de-texto">Importar archivos de texto</h2>
<p>La importación de archivos de texto es el primer paso y parte fundamental para la exploración de datos. Sin embargo, también puede llegar a ser una tarea complicada.</p>
<p>Los tipos de archivos mas comunes con los que solemos trabajar son:</p>
<ul>
<li>Archivos separados por coma (csv)</li>
<li>Archivos separados por tabulador (tsv)</li>
<li>Excel (xls)</li>
<li>Archivo de texto simple (txt)</li>
</ul>
</section>
<section id="funciones-base-para-importar-archivos" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="funciones-base-para-importar-archivos">Funciones base para importar archivos</h2>
<section id="importar-usando-ventanas" class="level3">
<h3 class="anchored" data-anchor-id="importar-usando-ventanas">Importar usando ventanas</h3>
<p>Rstudio permite importar un set de datos de forma muy sencilla dentro de su IDE. Para esto, tenemos que posicionarnos en la pantalla de ambiente <code>Environment</code> y seleccionar la opción de importar un set de datos <code>Import Dataset</code></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/manual_import_01.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="542"></p>
</figure>
</div>
<p>Una vez seleccionado el archivo, tenemos la opción de seleccionar el tipo de separador, formato y encabezados de las columnas.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/manual_import_02.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="531"></p>
</figure>
</div>
<p>Al concluir, el set de datos estará disponible en nuestro ambiente.</p>
</section>
<section id="importar-desde-la-línea-de-comando" class="level3">
<h3 class="anchored" data-anchor-id="importar-desde-la-línea-de-comando">Importar desde la línea de comando</h3>
<p>Para importar un archivo a nuestro ambiente podemos utilizar las funciones base de R mas relevantes que son <code>read.table</code> y <code>read.csv</code>. Por ejemplo, para abrir un archivo <strong>txt</strong> separado por tabuladores o <strong>csv</strong> separado por comas, respectivamente. utilizando la función:</p>
<p>La sintaxis básica de <code>read.table</code> es la siguiente</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"ruta/del/archivo.txt"</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">"</span><span class="sc">\t</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p><code>file</code>: Ruta del archivo que quieres importar.</p></li>
<li><p><code>header</code>: Indica si el archivo tiene una fila de encabezado. Si es <code>TRUE</code>, la primera fila se usará como nombres de columnas.</p></li>
<li><p><code>sep</code>: Especifica el delimitador de los valores. Por ejemplo, <code>"\t"</code> para archivos separados por tabulaciones o <code>","</code> para comas.</p></li>
</ul>
<p>Por otro lado, <code>read.csv</code> cumple con la misma función que <code>read.table</code> solo que es mas especifica para archivos separados por coma, por lo que no es necesario incluir el parámetro <code>sep</code>.</p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Ejercicio
</div>
</div>
<div class="callout-body-container callout-body">
<p>Utilizando la función <code>read.table</code> o <code>read.csv</code>abre el archivo <code>dataset_Pomemon.csv</code> que descargaste previamente en la carpeta de <code>datos</code></p>
</div>
</div>
</section>
<section id="importar-archivos-desde-un-url" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="importar-archivos-desde-un-url">Importar archivos desde un URL</h3>
<p>También es posible importar set de datos que se encuentren en línea usando la dirección url. El proceso es el mismo y se puede utilizar tanto <code>read.table</code> como <code>read.csv</code>, solamente en lugar de indicar la ruta del archivo en un directorio local, se indica el url.</p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Ejercicio
</div>
</div>
<div class="callout-body-container callout-body">
<p>Importa a tu ambiente el archivo <code>DET_test.txt</code> disponible en el siguiente enlace:</p>
<p><code>https://raw.githubusercontent.com/trippv/RNAseq2024/master/data/DET_test.txt</code></p>
<div class="cell">
<details class="code-fold">
<summary>ver codigo</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>deg <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="at">file =</span> <span class="st">"https://raw.githubusercontent.com/trippv/RNAseq2024/master/data/DET_test.txt"</span>,</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">sep =</span> <span class="st">"</span><span class="sc">\t</span><span class="st">"</span>, <span class="at">header =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Puedes asignar la dirección url a un objeto y después usar ese objeto dentro de la función <code>read.table</code>. Por ejemplo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">"www.muchosDatos.com"</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="at">file =</span> url, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">","</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div></div></section>
</section>
<section id="exploración-de-datos" class="level2">
<h2 class="anchored" data-anchor-id="exploración-de-datos">Exploración de datos</h2>
<p>Si queremos echar un vistazo rápido al contenido de nuestra tabla podemos utilizar algunas funciones base como <code>summary()</code> que nos despliega un resumen de cada columna de nuestra tabla</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(deg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  transcript            logFC               logCPM              LR          
 Length:66968       Min.   :-12.77959   Min.   :-1.8730   Min.   :  0.0000  
 Class :character   1st Qu.: -0.75187   1st Qu.:-0.1186   1st Qu.:  0.4067  
 Mode  :character   Median :  0.05418   Median : 1.4014   Median :  1.8677  
                    Mean   :  0.13555   Mean   : 1.9249   Mean   :  5.0564  
                    3rd Qu.:  0.89139   3rd Qu.: 3.4577   3rd Qu.:  5.8335  
                    Max.   : 13.92717   Max.   :15.5331   Max.   :226.2396  
     PValue             FDR           contrast          expression       
 Min.   :0.00000   Min.   :0.0000   Length:66968       Length:66968      
 1st Qu.:0.01572   1st Qu.:0.0628   Class :character   Class :character  
 Median :0.17174   Median :0.3436   Mode  :character   Mode  :character  
 Mean   :0.29213   Mean   :0.3957                                        
 3rd Qu.:0.52364   3rd Qu.:0.6983                                        
 Max.   :1.00000   Max.   :1.0000                                        </code></pre>
</div>
</div>
<p>La función <code>table()</code> se utiliza para crear una tabla de frecuencias de los datos en un vector o conjunto de vectores. Genera una tabla con la frecuencia con la que aparecen las combinaciones de valores únicos en los vectores suministrados. Es útil para resumir datos categóricos o discretos y para visualizar distribuciones de frecuencia.</p>
<p>Por ejemplo, si queremos saber cuantos de nuestros genes se sobre expresaron o reprimieron, podemos utilizar la función <code>tabel()</code> en la columna <code>expression</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(deg<span class="sc">$</span>expression)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 down    up 
51855 15113 </code></pre>
</div>
</div>
</section>
<section id="generar-un-subconjunto-de-datos" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="generar-un-subconjunto-de-datos">Generar un subconjunto de datos</h2>
<p>A menudo queremos generar un subconjunto de datos que contengan los valores de un tratamiento determinado o que cumplan con una condición determinada.</p>
<p>Para realizar esto, podemos utilizar dos métodos diferentes:</p>
<ol type="1">
<li><p>Utilizando indices, tal como lo hicimos en la <a href="1_Rbasico.html#indice-posicional">sección 1</a>.</p></li>
<li><p>Utilizando la función <code>subset()</code></p></li>
</ol>
<section id="subconjunto-con-indices" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="subconjunto-con-indices">Subconjunto con indices</h3>
<p>En la <a href="1_Rbasico.html#indice-posicional">sección 1</a> vimos como podemos filtrar datos que cumplan con una determinada condición en una matriz o data frame utilizando los indices <code>[]</code>.</p>
<p>Por ejemplo, si queremos filtrar aquellos transcritos con un valor P &lt; 0.001, podemos utilizar:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>deg<span class="sc">$</span>FDR <span class="sc">&lt;</span> <span class="fl">0.001</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Entonces, si queremos filtrar la tabla <code>deg</code> que cumplan con esta condición, entonces tenemos que especificar lo siguiente:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>sub_deg <span class="ot">&lt;-</span> deg[deg<span class="sc">$</span>PValue <span class="sc">&lt;</span> <span class="fl">0.001</span>, ] </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sub_deg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                 transcript     logFC   logCPM       LR   PValue      FDR
1 TRINITY_DN58348_c94_g1_i1 11.420646 8.774037 226.2396 3.94e-51 6.60e-47
2  TRINITY_DN41876_c1_g1_i1 13.927167 4.360619 205.7162 1.18e-46 9.89e-43
3  TRINITY_DN49189_c0_g1_i1 -8.953827 7.614606 179.7208 5.58e-41 3.11e-37
4  TRINITY_DN63782_c0_g2_i1 -8.082504 5.763163 154.3743 1.92e-35 8.03e-32
5 TRINITY_DN65222_c12_g2_i4  8.489764 4.367937 152.6882 4.48e-35 1.50e-31
6  TRINITY_DN54408_c0_g1_i2  7.765242 8.034710 148.5546 3.59e-34 1.00e-30
   contrast expression
1 T1_vs_CTL         up
2 T1_vs_CTL         up
3 T1_vs_CTL       down
4 T1_vs_CTL       down
5 T1_vs_CTL         up
6 T1_vs_CTL         up</code></pre>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Recuerda que cuando usamos indices, estos indican <code>[filas, columnas]</code> separadas por una coma. Por lo que si solamente queremos filtrar las filas con una determinada condición, dejamos el espacio de las columnas en blanco para indica que queremos seleccionar todas las columnas de la tabla</p>
</div>
</div>
</div></div></section>
<section id="operadores-y" class="level3">
<h3 class="anchored" data-anchor-id="operadores-y">Operadores <code>&amp;</code> y <code>|</code></h3>
<p>Si queremos filtrar nuestra tabla utilizando dos condiciones, por ejemplo transcritos que se sobre-expresaron (<code>up</code>) solamente en la condición <code>T1_vs_CTL</code> entonces utilizamos el operado <code>&amp;</code>.</p>
<p>El operado <code>&amp;</code>Es el operador lógico que indica “y”. Solo se seleccionarán las filas que cumplan ambas condiciones.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>sub_deg <span class="ot">&lt;-</span> deg[deg<span class="sc">$</span>contrast <span class="sc">==</span> <span class="st">"T1_vs_CTL"</span> <span class="sc">&amp;</span> deg<span class="sc">$</span>expression <span class="sc">==</span> <span class="st">"up"</span>, ]</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sub_deg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                 transcript     logFC   logCPM       LR   PValue      FDR
1 TRINITY_DN58348_c94_g1_i1 11.420646 8.774037 226.2396 3.94e-51 6.60e-47
2  TRINITY_DN41876_c1_g1_i1 13.927167 4.360619 205.7162 1.18e-46 9.89e-43
5 TRINITY_DN65222_c12_g2_i4  8.489764 4.367937 152.6882 4.48e-35 1.50e-31
6  TRINITY_DN54408_c0_g1_i2  7.765242 8.034710 148.5546 3.59e-34 1.00e-30
7  TRINITY_DN43718_c0_g1_i1  7.732693 4.834847 141.6420 1.16e-32 2.79e-29
8  TRINITY_DN51077_c0_g1_i2  7.497678 8.851058 139.2879 3.81e-32 7.97e-29
   contrast expression
1 T1_vs_CTL         up
2 T1_vs_CTL         up
5 T1_vs_CTL         up
6 T1_vs_CTL         up
7 T1_vs_CTL         up
8 T1_vs_CTL         up</code></pre>
</div>
</div>
<p>Por otro lado el operador <code>|</code> en R es un operador lógico que se utiliza para evaluar una de dos o más condiciones. Cuando aplicas <code>|</code> entre dos condiciones, el resultado será TRUE si cualquiera de las condiciones es verdadera. Si ambas condiciones son falsas, el resultado será FALSE.</p>
<p>Entonces, si queremos filtrar los transcriotos que tengan un valor de log fold-change mayor a 5 o menor a -5 hacemos lo siguiente</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>sub_deg <span class="ot">&lt;-</span> deg[deg<span class="sc">$</span>logFC <span class="sc">&gt;</span> <span class="dv">5</span> <span class="sc">|</span> deg<span class="sc">$</span>logFC <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">5</span>, ]</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sub_deg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                 transcript     logFC   logCPM       LR   PValue      FDR
1 TRINITY_DN58348_c94_g1_i1 11.420646 8.774037 226.2396 3.94e-51 6.60e-47
2  TRINITY_DN41876_c1_g1_i1 13.927167 4.360619 205.7162 1.18e-46 9.89e-43
3  TRINITY_DN49189_c0_g1_i1 -8.953827 7.614606 179.7208 5.58e-41 3.11e-37
4  TRINITY_DN63782_c0_g2_i1 -8.082504 5.763163 154.3743 1.92e-35 8.03e-32
5 TRINITY_DN65222_c12_g2_i4  8.489764 4.367937 152.6882 4.48e-35 1.50e-31
6  TRINITY_DN54408_c0_g1_i2  7.765242 8.034710 148.5546 3.59e-34 1.00e-30
   contrast expression
1 T1_vs_CTL         up
2 T1_vs_CTL         up
3 T1_vs_CTL       down
4 T1_vs_CTL       down
5 T1_vs_CTL         up
6 T1_vs_CTL         up</code></pre>
</div>
</div>
</section>
<section id="subconjunto-usando-la-función-subset" class="level3">
<h3 class="anchored" data-anchor-id="subconjunto-usando-la-función-subset">Subconjunto usando la función <code>subset()</code></h3>
<p>De igual manera podemos utilizar la función <code>subset()</code> para generar un subconjunto de datos a partir de determinada condición.</p>
<p>Por ejemplo, para filtrar los transcritos con un valor de FDR &lt; 0.001 haremos lo siguiente</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>sub_deg <span class="ot">&lt;-</span> <span class="fu">subset</span>(deg, FDR <span class="sc">&lt;</span> <span class="fl">0.001</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sub_deg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                 transcript     logFC   logCPM       LR   PValue      FDR
1 TRINITY_DN58348_c94_g1_i1 11.420646 8.774037 226.2396 3.94e-51 6.60e-47
2  TRINITY_DN41876_c1_g1_i1 13.927167 4.360619 205.7162 1.18e-46 9.89e-43
3  TRINITY_DN49189_c0_g1_i1 -8.953827 7.614606 179.7208 5.58e-41 3.11e-37
4  TRINITY_DN63782_c0_g2_i1 -8.082504 5.763163 154.3743 1.92e-35 8.03e-32
5 TRINITY_DN65222_c12_g2_i4  8.489764 4.367937 152.6882 4.48e-35 1.50e-31
6  TRINITY_DN54408_c0_g1_i2  7.765242 8.034710 148.5546 3.59e-34 1.00e-30
   contrast expression
1 T1_vs_CTL         up
2 T1_vs_CTL         up
3 T1_vs_CTL       down
4 T1_vs_CTL       down
5 T1_vs_CTL         up
6 T1_vs_CTL         up</code></pre>
</div>
</div>
<p>Y de igual manera podemos utilizar el operador <code>&amp;</code> para filtrar con dos condiciones:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>sub_deg <span class="ot">&lt;-</span> <span class="fu">subset</span>(deg, contrast <span class="sc">==</span> <span class="st">"T1_vs_CTL"</span> <span class="sc">&amp;</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>                    expression <span class="sc">==</span> <span class="st">"up"</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sub_deg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                 transcript     logFC   logCPM       LR   PValue      FDR
1 TRINITY_DN58348_c94_g1_i1 11.420646 8.774037 226.2396 3.94e-51 6.60e-47
2  TRINITY_DN41876_c1_g1_i1 13.927167 4.360619 205.7162 1.18e-46 9.89e-43
5 TRINITY_DN65222_c12_g2_i4  8.489764 4.367937 152.6882 4.48e-35 1.50e-31
6  TRINITY_DN54408_c0_g1_i2  7.765242 8.034710 148.5546 3.59e-34 1.00e-30
7  TRINITY_DN43718_c0_g1_i1  7.732693 4.834847 141.6420 1.16e-32 2.79e-29
8  TRINITY_DN51077_c0_g1_i2  7.497678 8.851058 139.2879 3.81e-32 7.97e-29
   contrast expression
1 T1_vs_CTL         up
2 T1_vs_CTL         up
5 T1_vs_CTL         up
6 T1_vs_CTL         up
7 T1_vs_CTL         up
8 T1_vs_CTL         up</code></pre>
</div>
</div>
</section>
</section>
<section id="exportar-tablas" class="level2">
<h2 class="anchored" data-anchor-id="exportar-tablas">Exportar tablas</h2>
<p>Dentro de nuestro análisis es común que tengamos que guardar nuestro conjunto de datos, ya sea que hayamos realizado algún tipo de análisis o que hayamos generado un subconjunto de datos que queremos guardar.</p>
<p>Para exportar nuestros datos, vamos a utilizar la función <code>write.table</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.table</span>(<span class="at">x =</span> sub_deg, <span class="co">#objeto que queremos guardar</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>            <span class="at">file =</span> <span class="st">"resultados/sub_deg.csv"</span>, <span class="co">#ruta</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">sep =</span> <span class="st">","</span>, <span class="co">#tipo de separador</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">row.names =</span> <span class="cn">FALSE</span>, <span class="co">#¿usar rownames?</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>            )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Ejercicio
</div>
</div>
<div class="callout-body-container callout-body">
<p>Utilizando lo que hemos aprendido hasta este momento, genera las siguientes tablas y guardalas en tu carpeta de resultados:</p>
<ul>
<li><p>Tabla con los resultados de transcritos expresados diferencialmente con un valor de FDR &lt; 0.05 del contraste <code>T2_vs_CTL</code>.</p></li>
<li><p>Tabla con transcritos sobre-expresados con un valor de log fold-change &gt; 5 y un valor de FDR &lt; 0.01.</p></li>
</ul>
<div class="cell">
<details class="code-fold">
<summary>ver codigo</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>e<span class="fl">.1</span> <span class="ot">&lt;-</span> deg[deg<span class="sc">$</span>contrast <span class="sc">==</span> <span class="st">"T2_vs_CTL"</span> <span class="sc">&amp;</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>             deg<span class="sc">$</span>FDR <span class="sc">&lt;</span> <span class="fl">0.05</span>, ]</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>e<span class="fl">.2</span> <span class="ot">&lt;-</span> deg[deg<span class="sc">$</span>logFC <span class="sc">&gt;</span> <span class="dv">5</span> <span class="sc">&amp;</span> deg<span class="sc">$</span>FDR <span class="sc">&lt;</span> <span class="fl">0.01</span>, ]</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="co"># exportar tablas</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="do">## e1</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="fu">write.table</span>(e<span class="fl">.1</span>, </span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>            <span class="st">"resultados/ejercicio_E1.csv"</span>,</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">sep =</span> <span class="st">","</span>)</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="do">## e2</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a><span class="fu">write.table</span>(e<span class="fl">.2</span>, </span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>            <span class="st">"resultados/ejercicio_E2.csv"</span>,</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">sep =</span> <span class="st">","</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation column-body">
  <div class="nav-page nav-page-previous">
      <a href="./1_Rproyectos.html" class="pagination-link" aria-label="Proyectos de Rstudio">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Proyectos de Rstudio</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./2_unix.html" class="pagination-link" aria-label="Introduccion Bash">
        <span class="nav-page-text">Introduccion Bash</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>